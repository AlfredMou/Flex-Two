/*! hellowWorld 2015-05-21 */
(function(){function t(t,e){var s=function(){};s.prototype=e.prototype,t.prototype=new s}function e(t,e){this.primary=t,this.list=t.find("li").clone(),this.usersArg=e,this.listUl=null,this.listInclude=null,this.carousel=null,this.nextButton=null,this.prvButton=null,e.prevButton&&(this.prevButtonBackGround=e.prevButton),e.nextButton&&(this.nextButtonBackGround=e.nextButton),this.singleWidth=t.find("img").first().width(),this.singeHeight=t.find("img").first().height(),this.selectNow=0,this.imageNum=this.list.length}function s(t){this.carousel=t}function i(t,e,i){s.call(this,t),this.selectList=null,this.timeOut=e.timeOut||c.timeOut,this.timeOutSpeed=e.timeOutSpeed||c.timeOutSpeed,this.selectSpeed=e.selectSpeed||c.selectSpeed,this.buttonColor=e.selectButtonColor||c.selectButtonColor,this.selectBottonNow=null,this.selectTimeOut=null,this.callBack=i}function o(t,e){s.call(this,t),this.selectList=null,this.previewNum=e.previewNum||5,this.selectNext=this.previewNum-1,this.selectBefore=0,this.selectPrev=0,this.selectBottonNow=null,this.previewWidth=t.singleWidth/this.previewNum,this.previewHeight=t.singleWidth/this.previewNum/t.singleWidth*t.singeHeight}function l(t,s){var l=s.carouselType||"CommentCarousel",c=new e(t,s);switch(console.log(l),t.css("display","none"),l){case"CommentCarousel":return new i(c,s);case"PreviewCarousel":return new o(c,s);default:console.error("未知轮播器类型")}}if($){var c={timeOut:!1,timeOutSpeed:5e3,selectSpeed:200,prevButton:"",nextButton:"",selectButtonColor:"#FC913A"};e.prototype.display=function(){var t=$(document.createElement("div")),e=$(document.createElement("div")),s=$(document.createElement("ul"));if(this.prevButtonBackGround){var i=$(document.createElement("div"));this.prvButton=i,i.css({position:"absolute",width:"10%",height:"20%","background-image":"url('"+this.prevButtonBackGround+"')","background-position":"center","background-size":"cover",top:"40%",cursor:"pointer","z-index":3}),t.append(i)}if(t.html(""),this.listUl=s,this.listInclude=e,this.carousel=t,t.css({width:this.singleWidth+"px",height:this.singeHeight+"px",position:"relative",overflow:"hidden",display:"block"}),e.css({width:3*this.singleWidth+"px",height:this.singeHeight+"px"}),s.css({"list-style":"none",padding:"0px",margin:"0px"}),this.list.css({"float":"left",position:"relative","z-index":2}),s.append(this.list[0]),e.append(s),t.append(i),t.append(e),t.append(o),this.nextButtonBackGround){var o=$(document.createElement("div"));this.nextButton=o,o.css({position:"absolute",top:"40%",width:"10%",height:"20%","background-image":"url('"+this.nextButtonBackGround+"')","background-position":"center","background-size":"cover",right:"0px",cursor:"pointer","z-index":4}),t.append(o)}this.primary.after(t)},e.prototype.addEvent=function(t){var e=t||this;this.nextButton.on("click",function(){e.next()}),this.prvButton.on("click",function(){e.prev()})},e.prototype.showWidth=function(){console.log(this.singleWidth)},e.prototype.next=function(){var t=this.selectNow+1;this.select(t)},e.prototype.prev=function(){var t=this.selectNow-1;this.select(t)},e.prototype.select=function(t){this.selectNow=t>=this.imageNum?0:0>t?this.imageNum-1:t,showNow=$(this.list[this.selectNow]).clone(),this.listUl.children().first().after(showNow),this.listInclude.css({"margin-left":"-"+this.singleWidth+"px"}),this.listUl.children().first().remove(),this.listInclude.css("margin-left","0px")},s.prototype.display=function(){this.carousel.display()},s.prototype.addEvent=function(){this.carousel.addEvent()},s.prototype.showWidth=function(){this.carousel.showWidth()},s.prototype.next=function(){this.carousel.next()},s.prototype.prev=function(){this.carousel.prev()},s.prototype.select=function(t){this.carousel.select(t)},t(i,s),i.prototype.changeSelectBotton=function(){var t=this.selectList.children().eq(this.carousel.selectNow);this.selectBottonNow.css({"background-color":"inherit",width:"5px"}),t.css({"background-color":this.buttonColor,width:"20px"}),this.selectBottonNow=t},i.prototype.select=function(t,e){var s=this.carousel.selectNow,i=this;return clearTimeout(this.selectTimeOut),this.carousel.selectNow===t?(this.timeOut&&e&&(this.selectTimeOut=setTimeout(function(){i.select(t+1,!0)},this.timeOutSpeed)),void 0):(t>=this.carousel.imageNum?(t=0,this.carousel.selectNow=0):0>t?(t=this.carousel.imageNum-1,this.carousel.selectNow=this.carousel.imageNum-1):this.carousel.selectNow=t,this.carousel.selectNow>s?this.afterSelect():this.prvSelect(),this.timeOut&&e&&(this.selectTimeOut=setTimeout(function(){i.select(t+1,!0)},this.timeOutSpeed)),this.changeSelectBotton(),void 0)},i.prototype.setTimeOut=function(){var t=this;this.selectTimeOut=setTimeout(function(){t.select(t.carousel.selectNow+1,!0)},this.timeOutSpeed),this.carousel.carousel.on("mouseenter",function(){clearTimeout(t.selectTimeOut)}),this.carousel.carousel.on("mouseleave",function(){t.selectTimeOut=setTimeout(function(){t.select(t.carousel.selectNow+1,!0)},t.timeOutSpeed)})},i.prototype.prvSelect=function(){var t=this;this.carousel.listInclude.stop(!1,!0),showNow=$(this.carousel.list[this.carousel.selectNow]).clone(),this.carousel.listInclude.css({"margin-left":"-"+this.carousel.singleWidth+"px"}),this.carousel.listUl.children().first().before(showNow),this.carousel.listInclude.animate({"margin-left":"0px"},this.selectSpeed,function(){t.carousel.listUl.children().eq(1).remove(),t.callBack&&t.callBack(t.carousel.listUl.children().first()[0])})},i.prototype.afterSelect=function(){var t=this;this.carousel.listInclude.stop(!1,!0),showNow=$(this.carousel.list[this.carousel.selectNow]).clone(),this.carousel.listUl.children().first().after(showNow),this.carousel.listInclude.animate({"margin-left":"-"+this.carousel.singleWidth+"px"},this.selectSpeed,function(){t.carousel.listInclude.css("margin-left","0px"),t.carousel.listUl.children().first().remove(),t.callBack&&t.callBack(t.carousel.listUl.children().first()[0])})},i.prototype.next=function(){var t=this.carousel.selectNow+1;this.select(t)},i.prototype.prev=function(){var t=this.carousel.selectNow-1;this.select(t)},i.prototype.addEvent=function(t){var e=this.carousel;this.carousel.addEvent(t||this),this.carousel.carousel.on("mouseenter",function(){e.prvButton.css({display:"block"}),e.nextButton.css({display:"block"})}),this.carousel.carousel.on("mouseleave",function(){e.prvButton.css({display:"none"}),e.nextButton.css({display:"none"})})},i.prototype.display=function(t){var e=$(document.createElement("div")),s=$(document.createElement("ul")),i=$(document.createElement("li")),o=t||this,l=this.carousel.imageNum,c=$(document.createElement("div"));messageDivBackGround=$(document.createElement("div")),this.selectList=s,messageDivBackGround.css({position:"absolute",bottom:" 0",height:"30%","padding-top":"10px",margin:"0px","background-color":"black",opacity:"0.5",color:"white","text-align":"center",width:"100%",display:"block","z-index":6}),c.css({position:"absolute",bottom:" 0",height:"27%","padding-top":"10px",margin:"0px",color:"white","text-align":"center",width:"100%",display:"block","z-index":8}),e.css({position:"absolute",bottom:"5%",left:"0px",right:"0px",height:"5%","text-align":"center","z-index":10}),s.css({"list-style":"none",padding:"0px",margin:"0px",margin:"auto",width:13*l+20+"px",height:"8px"}),i.css({"float":"left",width:"6px",height:"6px",border:"1px solid "+this.buttonColor,"border-radius":"5px","margin-right":"5px","-webkit-transition":"width 0.5s ease-out","-moz-transition":"width 0.5s ease-out","-o-transition":"width 0.5s ease-out",transition:"width 0.5s ease-out"}),i.on("click",function(){var t=o.selectList.children().index(this);o.select(t)});for(var n=this.carousel.list.length-1;n>=0;n--){var r=$(this.carousel.list[n]).find("img").nextAll();$(this.carousel.list[n]).append(c.clone().append(r.clone())).append(messageDivBackGround.clone()),r.remove()}for(var n=l-1;n>=0;n--)n!=l-1?s.append(i.clone(!0)):(this.selectBottonNow=i.clone(!0),s.append(this.selectBottonNow.css({"background-color":this.buttonColor,width:"20px"})));e.append(s),this.carousel.display(),this.carousel.carousel.append(e),this.carousel.nextButton.css({display:"none"}),this.carousel.prvButton.css({display:"none"})},o.prototype.changeSelectBotton=function(){var t=this.selectList.children().eq(this.carousel.selectNow);this.carousel.selectNow%this.previewNum,this.carousel.selectNow<this.carousel.imageNum-1&&this.carousel.selectNow>0&&(this.carousel.selectNow===this.selectNext&&(this.nextSelectList(),this.selectNext=this.selectNext+1,this.selectPrev=this.selectPrev+1),this.carousel.selectNow===this.selectPrev&&(this.prvSelectList(),this.selectNext=this.selectNext-1,this.selectPrev=this.selectPrev-1)),this.carousel.selectNow===this.carousel.imageNum-1&&(this.endSelectLList(),this.selectNext=this.carousel.imageNum-1,this.selectPrev=this.carousel.imageNum-this.previewNum),0===this.carousel.selectNow&&(this.startSelectList(),this.selectNext=this.previewNum-1,this.selectPrev=0),this.selectBottonNow.css({opacity:"0.6"}),t.css({opacity:"1"}),this.selectBottonNow=t},o.prototype.prvSelectList=function(){this.selectList.stop(!1,!0);var t,e=this.selectList.css("margin-left"),s=parseInt(e.slice(0,e.length-2));t=s+this.previewWidth,this.selectList.animate({"margin-left":t+"px"},300)},o.prototype.nextSelectList=function(){this.selectList.stop(!1,!0);var t,e=this.selectList.css("margin-left"),s=parseInt(e.slice(0,e.length-2));t=s-this.previewWidth,this.selectList.animate({"margin-left":t+"px"},300)},o.prototype.endSelectLList=function(){this.selectList.stop(!1,!0),this.selectList.animate({"margin-left":"-"+this.previewWidth*(this.carousel.imageNum-this.previewNum)+"px"},300)},o.prototype.startSelectList=function(){this.selectList.stop(!1,!0),this.selectList.animate({"margin-left":"0px"},300)},o.prototype.select=function(t){this.selectBefore=this.carousel.selectNow,this.carousel.selectNow!==t&&(this.carousel.selectNow=t>=this.carousel.imageNum?0:0>t?this.carousel.imageNum-1:t,this.selectBefore<this.carousel.selectNow?this.afterSelect():this.prvSelect(),this.changeSelectBotton())},o.prototype.prvSelect=function(){var t=this;this.carousel.listInclude.stop(!1,!0),showNow=$(this.carousel.list[this.carousel.selectNow]).clone(),this.carousel.listInclude.css({"margin-left":"-"+this.carousel.singleWidth+"px"}),this.carousel.listUl.children().first().before(showNow),this.carousel.listInclude.animate({"margin-left":"0px"},200,function(){t.carousel.listUl.children().eq(1).remove()})},o.prototype.afterSelect=function(){var t=this;this.carousel.listInclude.stop(!1,!0),showNow=$(this.carousel.list[this.carousel.selectNow]).clone(),this.carousel.listUl.children().first().after(showNow),this.carousel.listInclude.animate({"margin-left":"-"+this.carousel.singleWidth+"px"},200,function(){t.carousel.listInclude.css("margin-left","0px"),t.carousel.listUl.children().first().remove()})},o.prototype.next=function(){var t=this.carousel.selectNow+1;this.select(t)},o.prototype.prev=function(){var t=this.carousel.selectNow-1;this.select(t)},o.prototype.addEvent=function(t){var e=this.carousel;this.carousel.addEvent(t||this),this.carousel.carousel.on("mouseenter",function(){e.prvButton.css({display:"block"}),e.nextButton.css({display:"block"})}),this.carousel.carousel.on("mouseleave",function(){e.prvButton.css({display:"none"}),e.nextButton.css({display:"none"})})},o.prototype.display=function(t){var e=$(document.createElement("div")),s=$(document.createElement("ul")),i=$(document.createElement("li")),o=t||this,l=this.carousel.imageNum,c=$(document.createElement("div"));messageDivBackGround=$(document.createElement("div")),this.selectList=s,messageDivBackGround.css({position:"absolute",bottom:" 0",height:"7%","padding-top":"10px","padding-bottom":"10px",margin:"0px","background-color":"black",opacity:"0.5",color:"white","text-align":"center",width:"100%",display:"block","z-index":6}),c.css({position:"absolute",bottom:" 0",height:"7%","padding-top":"10px","padding-bottom":"10px",margin:"0px",color:"white","text-align":"center",width:"100%",display:"block","z-index":8}),e.css({height:this.previewHeight+"px",margin:"0px","padding-top":"5px","padding-bottom":"5px","background-color":"black"}),s.css({margin:"0px",padding:"0px","list-style":"none",width:this.previewWidth*this.carousel.imageNum}),i.css({width:this.previewWidth+"px","float":"left",margin:"0px",padding:"0px",height:"52px",opacity:.6}),i.on("click",function(){var t=o.selectList.children().index(this);o.select(t)});for(var n=this.carousel.list.length-1;n>=0;n--){var r=$(this.carousel.list[n]).find("img").nextAll();$(this.carousel.list[n]).append(c.clone().append(r.clone())).append(messageDivBackGround.clone()),r.remove()}for(var n=0,a=l;a>n;n++){var h=$(this.carousel.list[n]).find("img").clone(),u=i.clone(!0).append(h);h.attr({width:this.carousel.singleWidth/this.previewNum,height:this.carousel.singleWidth/this.previewNum/this.carousel.singleWidth*this.carousel.singeHeight}),0===n&&(this.selectBottonNow=u,u.css({opacity:"1"})),s.append(u)}e.append(s),this.carousel.display(),this.carousel.carousel.css({height:"auto"}),this.carousel.carousel.append(e),this.carousel.nextButton.css({display:"none"}),this.carousel.prvButton.css({display:"none"})},$.fn.OrangeCarousel=function(t){var e=l($(this),t);e.display(),e.addEvent(),t.timeOut===!0&&e.setTimeOut()}}else console.error("this Carousel need jquery,please load jquery file first")})();